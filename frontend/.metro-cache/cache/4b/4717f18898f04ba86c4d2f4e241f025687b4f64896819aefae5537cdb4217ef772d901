{"dependencies":[{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":50,"index":65}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"../interfaces","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}}],"key":"GMKh3a5g5xNaAog15vl07v6pG2U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return n}});var t=r(d[0]),s=r(d[1]);class n{inProgress=!1;constructor(s){this.onScaleBegin=s.onScaleBegin,this.onScale=s.onScale,this.onScaleEnd=s.onScaleEnd,this.spanSlop=2*t.DEFAULT_TOUCH_SLOP,this.minSpan=0}onTouchEvent(t,n){this.currentTime=t.time;const o=t.eventType,h=n.trackedPointersCount,c=o===s.EventTypes.UP||o===s.EventTypes.ADDITIONAL_POINTER_UP||o===s.EventTypes.CANCEL;if((o===s.EventTypes.DOWN||c)&&(this.inProgress&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=0),c))return!0;const p=o===s.EventTypes.DOWN||o===s.EventTypes.ADDITIONAL_POINTER_UP||o===s.EventTypes.ADDITIONAL_POINTER_DOWN,u=o===s.EventTypes.ADDITIONAL_POINTER_UP,S=u?t.pointerId:void 0,l=u?h-1:h,T=n.getAbsoluteCoordsSum(),v=T.x/l,E=T.y/l;let P=0,_=0;n.trackedPointers.forEach((t,s)=>{s!==S&&(P+=Math.abs(t.abosoluteCoords.x-v),_+=Math.abs(t.abosoluteCoords.y-E))});const O=2*(P/l),y=2*(_/l),f=Math.hypot(O,y),D=this.inProgress;return this._focusX=v,this._focusY=E,this.inProgress&&(f<this.minSpan||p)&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=f),p&&(this.initialSpan=this.prevSpan=this._currentSpan=f),!this.inProgress&&f>=this.minSpan&&(D||Math.abs(f-this.initialSpan)>this.spanSlop)&&(this.prevSpan=this._currentSpan=f,this.prevTime=this.currentTime,this.inProgress=this.onScaleBegin(this)),o!==s.EventTypes.MOVE||(this._currentSpan=f,this.inProgress&&!this.onScale(this)||(this.prevSpan=this.currentSpan,this.prevTime=this.currentTime),!0)}calculateScaleFactor(t){return t<2?1:this.prevSpan>0?this.currentSpan/this.prevSpan:1}get currentSpan(){return this._currentSpan}get focusX(){return this._focusX}get focusY(){return this._focusY}get timeDelta(){return this.currentTime-this.prevTime}}});","lineCount":1,"map":[[1,28,1,0],[1,41,1,13,"Object"],[1,48,1,13,"defineProperty"],[1,63,1,13,"e"],[1,65,1,13],[1,79,1,13,"value"],[1,86,1,13],[1,90,5,15,"Object"],[1,97,5,15,"defineProperty"],[1,112,5,15,"e"],[1,114,5,15],[1,125,5,15,"enumerable"],[1,137,5,15],[1,139,5,15,"get"],[1,143,5,15],[1,161,5,15,"ScaleGestureDetector"],[1,162,5,15],[1,166,3,0],[1,170,3,0,"_constants"],[1,172,3,0,"r"],[1,174,3,0,"d"],[1,176,3,0],[1,180,4,0,"_interfaces"],[1,182,4,0,"r"],[1,184,4,0,"d"],[1,186,4,0],[1,190,5,15],[1,196,5,21,"ScaleGestureDetector"],[1,198,6,2,"inProgress"],[1,210,6,15],[1,212,7,2,"constructor"],[1,224,7,14,"callbacks"],[1,227,8,4,"this"],[1,232,8,9,"onScaleBegin"],[1,245,8,24,"callbacks"],[1,247,8,34,"onScaleBegin"],[1,260,9,4,"this"],[1,265,9,9,"onScale"],[1,273,9,19,"callbacks"],[1,275,9,29,"onScale"],[1,283,10,4,"this"],[1,288,10,9,"onScaleEnd"],[1,299,10,22,"callbacks"],[1,301,10,32,"onScaleEnd"],[1,312,11,4,"this"],[1,317,11,9,"spanSlop"],[1,326,11,41],[1,328,11,20,"DEFAULT_TOUCH_SLOP"],[1,330,11,38,"DEFAULT_TOUCH_SLOP"],[1,349,12,4,"this"],[1,354,12,9,"minSpan"],[1,362,12,19],[1,363,13,2],[1,364,14,2,"onTouchEvent"],[1,377,14,15,"event"],[1,379,14,22,"tracker"],[1,382,15,4,"this"],[1,387,15,9,"currentTime"],[1,399,15,23,"event"],[1,401,15,29,"time"],[1,406,16,4],[1,412,16,10,"action"],[1,414,16,19,"event"],[1,416,16,25,"eventType"],[1,426,17,10,"numOfPointers"],[1,428,17,26,"tracker"],[1,430,17,34,"trackedPointersCount"],[1,451,18,10,"streamComplete"],[1,453,18,27,"action"],[1,457,18,38,"EventTypes"],[1,459,18,48,"EventTypes"],[1,470,18,49,"UP"],[1,474,18,55,"action"],[1,478,18,66,"EventTypes"],[1,480,18,76,"EventTypes"],[1,491,18,77,"ADDITIONAL_POINTER_UP"],[1,514,18,102,"action"],[1,518,18,113,"EventTypes"],[1,520,18,123,"EventTypes"],[1,531,18,124,"CANCEL"],[1,538,19,4],[1,542,19,8,"action"],[1,546,19,19,"EventTypes"],[1,548,19,29,"EventTypes"],[1,559,19,30,"DOWN"],[1,565,19,38,"streamComplete"],[1,570,20,10,"this"],[1,575,20,15,"inProgress"],[1,588,21,8,"this"],[1,593,21,13,"onScaleEnd"],[1,604,21,24,"this"],[1,610,22,8,"this"],[1,615,22,13,"inProgress"],[1,627,22,26],[1,629,23,8,"this"],[1,634,23,13,"initialSpan"],[1,646,23,27],[1,649,25,10,"streamComplete"],[1,652,26,8],[1,659,26,15],[1,661,29,4],[1,667,29,10,"configChanged"],[1,669,29,26,"action"],[1,673,29,37,"EventTypes"],[1,675,29,47,"EventTypes"],[1,686,29,48,"DOWN"],[1,692,29,56,"action"],[1,696,29,67,"EventTypes"],[1,698,29,77,"EventTypes"],[1,709,29,78,"ADDITIONAL_POINTER_UP"],[1,732,29,103,"action"],[1,736,29,114,"EventTypes"],[1,738,29,124,"EventTypes"],[1,749,29,125,"ADDITIONAL_POINTER_DOWN"],[1,773,30,10,"pointerUp"],[1,775,30,22,"action"],[1,779,30,33,"EventTypes"],[1,781,30,43,"EventTypes"],[1,792,30,44,"ADDITIONAL_POINTER_UP"],[1,814,31,10,"ignoredPointer"],[1,816,31,27,"pointerUp"],[1,818,31,39,"event"],[1,820,31,45,"pointerId"],[1,835,31,57,"undefined"],[1,837,35,10,"div"],[1,839,35,16,"pointerUp"],[1,841,35,28,"numOfPointers"],[1,843,35,44],[1,845,35,48,"numOfPointers"],[1,847,36,10,"coordsSum"],[1,849,36,22,"tracker"],[1,851,36,30,"getAbsoluteCoordsSum"],[1,874,37,10,"focusX"],[1,876,37,19,"coordsSum"],[1,878,37,29,"x"],[1,880,37,33,"div"],[1,882,38,10,"focusY"],[1,884,38,19,"coordsSum"],[1,886,38,29,"y"],[1,888,38,33,"div"],[1,890,42,4],[1,894,42,8,"devSumX"],[1,896,42,18],[1,898,43,8,"devSumY"],[1,900,43,18],[1,902,44,4,"tracker"],[1,904,44,12,"trackedPointers"],[1,920,44,28,"forEach"],[1,928,44,36],[1,929,44,37,"value"],[1,931,44,44,"key"],[1,936,45,10,"key"],[1,940,45,18,"ignoredPointer"],[1,944,48,6,"devSumX"],[1,947,48,17,"Math"],[1,952,48,22,"abs"],[1,956,48,26,"value"],[1,958,48,32,"abosoluteCoords"],[1,974,48,48,"x"],[1,976,48,52,"focusX"],[1,979,49,6,"devSumY"],[1,982,49,17,"Math"],[1,987,49,22,"abs"],[1,991,49,26,"value"],[1,993,49,32,"abosoluteCoords"],[1,1009,49,48,"y"],[1,1011,49,52,"focusY"],[1,1017,51,4],[1,1023,53,10,"spanX"],[1,1025,53,25],[1,1028,51,17,"devSumX"],[1,1030,51,27,"div"],[1,1033,54,10,"spanY"],[1,1035,54,25],[1,1038,52,17,"devSumY"],[1,1040,52,27,"div"],[1,1043,55,10,"span"],[1,1045,55,17,"Math"],[1,1050,55,22,"hypot"],[1,1056,55,28,"spanX"],[1,1058,55,35,"spanY"],[1,1061,58,10,"wasInProgress"],[1,1063,58,26,"this"],[1,1068,58,31,"inProgress"],[1,1079,76,4],[1,1086,59,4,"this"],[1,1091,59,9,"_focusX"],[1,1099,59,19,"focusX"],[1,1101,60,4,"this"],[1,1106,60,9,"_focusY"],[1,1114,60,19,"focusY"],[1,1116,61,8,"this"],[1,1121,61,13,"inProgress"],[1,1134,61,28,"span"],[1,1136,61,35,"this"],[1,1141,61,40,"minSpan"],[1,1150,61,51,"configChanged"],[1,1155,62,6,"this"],[1,1160,62,11,"onScaleEnd"],[1,1171,62,22,"this"],[1,1177,63,6,"this"],[1,1182,63,11,"inProgress"],[1,1194,63,24],[1,1196,64,6,"this"],[1,1201,64,11,"initialSpan"],[1,1213,64,25,"span"],[1,1216,66,8,"configChanged"],[1,1220,67,6,"this"],[1,1225,67,11,"initialSpan"],[1,1237,67,25,"this"],[1,1242,67,30,"prevSpan"],[1,1251,67,41,"this"],[1,1256,67,46,"_currentSpan"],[1,1269,67,61,"span"],[1,1273,69,9,"this"],[1,1278,69,14,"inProgress"],[1,1290,69,28,"span"],[1,1293,69,36,"this"],[1,1298,69,41,"minSpan"],[1,1308,69,53,"wasInProgress"],[1,1311,69,70,"Math"],[1,1316,69,75,"abs"],[1,1320,69,79,"span"],[1,1322,69,86,"this"],[1,1327,69,91,"initialSpan"],[1,1340,69,106,"this"],[1,1345,69,111,"spanSlop"],[1,1357,70,6,"this"],[1,1362,70,11,"prevSpan"],[1,1371,70,22,"this"],[1,1376,70,27,"_currentSpan"],[1,1389,70,42,"span"],[1,1391,71,6,"this"],[1,1396,71,11,"prevTime"],[1,1405,71,22,"this"],[1,1410,71,27,"currentTime"],[1,1422,72,6,"this"],[1,1427,72,11,"inProgress"],[1,1438,72,24,"this"],[1,1443,72,29,"onScaleBegin"],[1,1456,72,42,"this"],[1,1463,76,8,"action"],[1,1467,76,19,"EventTypes"],[1,1469,76,29,"EventTypes"],[1,1480,76,30,"MOVE"],[1,1487,79,4,"this"],[1,1492,79,9,"_currentSpan"],[1,1505,79,24,"span"],[1,1507,80,8,"this"],[1,1512,80,13,"inProgress"],[1,1525,80,28,"this"],[1,1530,80,33,"onScale"],[1,1538,80,41,"this"],[1,1546,83,4,"this"],[1,1551,83,9,"prevSpan"],[1,1560,83,20,"this"],[1,1565,83,25,"currentSpan"],[1,1577,84,4,"this"],[1,1582,84,9,"prevTime"],[1,1591,84,20,"this"],[1,1596,84,25,"currentTime"],[1,1610,81,13],[1,1612,86,2],[1,1613,87,2,"calculateScaleFactor"],[1,1634,87,23,"numOfPointers"],[1,1637,88,4],[1,1644,88,8,"numOfPointers"],[1,1646,88,24],[1,1648,89,13],[1,1650,91,11,"this"],[1,1655,91,16,"prevSpan"],[1,1664,91,27],[1,1666,91,31,"this"],[1,1671,91,36,"currentSpan"],[1,1683,91,50,"this"],[1,1688,91,55,"prevSpan"],[1,1697,91,66],[1,1698,92,2],[1,1699,93,2],[1,1714,93,6,"currentSpan"],[1,1717,94,4],[1,1724,94,11,"this"],[1,1729,94,16,"_currentSpan"],[1,1741,95,2],[1,1742,96,2],[1,1752,96,6,"focusX"],[1,1755,97,4],[1,1762,97,11,"this"],[1,1767,97,16,"_focusX"],[1,1774,98,2],[1,1775,99,2],[1,1785,99,6,"focusY"],[1,1788,100,4],[1,1795,100,11,"this"],[1,1800,100,16,"_focusY"],[1,1807,101,2],[1,1808,102,2],[1,1821,102,6,"timeDelta"],[1,1824,103,4],[1,1831,103,11,"this"],[1,1836,103,16,"currentTime"],[1,1848,103,30,"this"],[1,1853,103,35,"prevTime"],[1,1861,104,2],[1,1863,105,1],[1,1866]],"functionMap":{"names":["<global>","ScaleGestureDetector","constructor","onTouchEvent","tracker.trackedPointers.forEach$argument_0","calculateScaleFactor","get__currentSpan","get__focusX","get__focusY","get__timeDelta"],"mappings":"AAA;eCI;ECE;GDM;EEC;oCC8B;KDM;GFoC;EIC;GJK;EKC;GLE;EMC;GNE;EOC;GPE;EQC;GRE;CDC"},"hasCjsExports":false},"type":"js/module"}]}