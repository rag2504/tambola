{"dependencies":[{"name":"../interfaces","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}}],"key":"GMKh3a5g5xNaAog15vl07v6pG2U=","exportNames":["*"],"imports":1}},{"name":"./EventManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":59},"end":{"line":4,"column":42,"index":101}}],"key":"+tTRfUGWY5rcrw6ZVLEgvlFTMQc=","exportNames":["*"],"imports":1}},{"name":"../../PointerType","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":102},"end":{"line":5,"column":48,"index":150}}],"key":"PNpP2j+zRZwLQ3w6ZmXPMJNakiU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return o}});var e,t=r(d[0]),s=r(d[1]),n=(e=s)&&e.__esModule?e:{default:e},c=r(d[2]);class o extends n.default{static activationKeys=['Enter',' '];static cancelationKeys=['Tab'];isPressed=!1;static registeredStaticListeners=!1;static instances=new Set;static keyUpStaticCallback=e=>{-1!==this.activationKeys.indexOf(e.key)&&this.instances.forEach(t=>{t.onKeyUp(e)})};keyDownCallback=e=>{-1!==o.cancelationKeys.indexOf(e.key)&&this.isPressed?this.dispatchEvent(e,t.EventTypes.CANCEL):-1!==o.activationKeys.indexOf(e.key)&&this.dispatchEvent(e,t.EventTypes.DOWN)};onKeyUp=e=>{-1!==o.activationKeys.indexOf(e.key)&&this.isPressed&&this.dispatchEvent(e,t.EventTypes.UP)};dispatchEvent(e,s){if(!(e.target instanceof HTMLElement))return;const n=this.mapEvent(e,s);switch(s){case t.EventTypes.UP:this.isPressed=!1,this.onPointerUp(n);break;case t.EventTypes.DOWN:this.isPressed=!0,this.onPointerDown(n);break;case t.EventTypes.CANCEL:this.isPressed=!1,this.onPointerCancel(n)}}registerListeners(){this.view.addEventListener('keydown',this.keyDownCallback),o.instances.add(this),o.registeredStaticListeners||(o.registeredStaticListeners=!0,document.addEventListener('keyup',o.keyUpStaticCallback,{capture:!0}))}unregisterListeners(){this.view.removeEventListener('keydown',this.keyDownCallback),o.instances.delete(this),0===o.instances.size&&(document.removeEventListener('keyup',o.keyUpStaticCallback,{capture:!0}),o.registeredStaticListeners=!1)}mapEvent(e,t){const s=e.target.getBoundingClientRect(),n={x:s?.x+s?.width/2,y:s?.y+s?.height/2},o={x:s?.width/2,y:s?.height/2};return{x:n.x,y:n.y,offsetX:o.x,offsetY:o.y,pointerId:0,eventType:t,pointerType:c.PointerType.KEY,time:e.timeStamp}}}});","lineCount":1,"map":[[1,29,1,0],[1,42,1,13,"Object"],[1,49,1,13,"defineProperty"],[1,64,1,13,"_e"],[1,67,1,13],[1,81,1,13,"value"],[1,88,1,13],[1,92,6,15,"Object"],[1,99,6,15,"defineProperty"],[1,114,6,15,"_e"],[1,117,6,15],[1,128,6,15,"enumerable"],[1,140,6,15],[1,142,6,15,"get"],[1,146,6,15],[1,164,6,15,"KeyboardEventManager"],[1,165,6,15],[1,169,3,0],[1,173,1,13,"e"],[1,175,3,0,"_interfaces"],[1,177,3,0,"r"],[1,179,3,0,"d"],[1,181,3,0],[1,185,4,0,"_EventManager"],[1,187,4,0,"r"],[1,189,4,0,"d"],[1,191,4,0],[1,195,4,0,"EventManager"],[1,198,1,13,"e"],[1,200,4,0,"_EventManager"],[1,204,1,13,"e"],[1,206,1,13,"__esModule"],[1,217,1,13,"e"],[1,219,1,13],[1,220,1,13,"default"],[1,228,1,13,"e"],[1,231,5,0,"_PointerType"],[1,233,5,0,"r"],[1,235,5,0,"d"],[1,237,5,0],[1,241,6,15],[1,247,6,21,"KeyboardEventManager"],[1,257,6,50,"EventManager"],[1,259,6,62,"default"],[1,267,7,2,"static"],[1,289,7,26],[1,290,7,27],[1,298,7,36],[1,303,8,2,"static"],[1,326,8,27],[1,327,8,28],[1,334,9,2,"isPressed"],[1,345,9,14],[1,347,10,2,"static"],[1,381,10,37],[1,383,11,2,"static"],[1,400,11,21],[1,404,11,25,"Set"],[1,408,12,2,"static"],[1,435,12,31,"event"],[1,440,17,46],[1,444,17,8,"this"],[1,449,17,13,"activationKeys"],[1,464,17,28,"indexOf"],[1,472,17,36,"event"],[1,474,17,42,"key"],[1,480,20,4,"this"],[1,485,20,9,"instances"],[1,495,20,19,"forEach"],[1,503,20,27,"item"],[1,507,21,6,"item"],[1,509,21,11,"onKeyUp"],[1,517,21,19,"event"],[1,523,24,2,"keyDownCallback"],[1,539,24,20,"event"],[1,544,25,63],[1,548,25,8,"KeyboardEventManager"],[1,550,25,29,"cancelationKeys"],[1,566,25,45,"indexOf"],[1,574,25,53,"event"],[1,576,25,59,"key"],[1,582,25,74,"this"],[1,587,25,79,"isPressed"],[1,597,26,6,"this"],[1,602,26,11,"dispatchEvent"],[1,616,26,25,"event"],[1,618,26,32,"EventTypes"],[1,620,26,42,"EventTypes"],[1,631,26,43,"CANCEL"],[1,640,29,62],[1,644,29,8,"KeyboardEventManager"],[1,646,29,29,"activationKeys"],[1,661,29,44,"indexOf"],[1,669,29,52,"event"],[1,671,29,58,"key"],[1,677,32,4,"this"],[1,682,32,9,"dispatchEvent"],[1,696,32,23,"event"],[1,698,32,30,"EventTypes"],[1,700,32,40,"EventTypes"],[1,711,32,41,"DOWN"],[1,718,34,2,"onKeyUp"],[1,726,34,12,"event"],[1,731,35,62],[1,735,35,8,"KeyboardEventManager"],[1,737,35,29,"activationKeys"],[1,752,35,44,"indexOf"],[1,760,35,52,"event"],[1,762,35,58,"key"],[1,768,35,74,"this"],[1,773,35,79,"isPressed"],[1,784,38,4,"this"],[1,789,38,9,"dispatchEvent"],[1,803,38,23,"event"],[1,805,38,30,"EventTypes"],[1,807,38,40,"EventTypes"],[1,818,38,41,"UP"],[1,823,40,2,"dispatchEvent"],[1,837,40,16,"event"],[1,839,40,23,"eventType"],[1,842,41,4],[1,847,41,10,"event"],[1,849,41,16,"target"],[1,867,41,34,"HTMLElement"],[1,880,42,6],[1,887,44,4],[1,893,44,10,"adaptedEvent"],[1,895,44,25,"this"],[1,900,44,30,"mapEvent"],[1,909,44,39,"event"],[1,911,44,46,"eventType"],[1,914,45,4],[1,921,45,12,"eventType"],[1,924,46,6],[1,929,46,11,"EventTypes"],[1,931,46,21,"EventTypes"],[1,942,46,22,"UP"],[1,945,47,8,"this"],[1,950,47,13,"isPressed"],[1,961,47,25],[1,963,48,8,"this"],[1,968,48,13,"onPointerUp"],[1,980,48,25,"adaptedEvent"],[1,983,49,8],[1,989,50,6],[1,994,50,11,"EventTypes"],[1,996,50,21,"EventTypes"],[1,1007,50,22,"DOWN"],[1,1012,51,8,"this"],[1,1017,51,13,"isPressed"],[1,1028,51,25],[1,1030,52,8,"this"],[1,1035,52,13,"onPointerDown"],[1,1049,52,27,"adaptedEvent"],[1,1052,53,8],[1,1058,54,6],[1,1063,54,11,"EventTypes"],[1,1065,54,21,"EventTypes"],[1,1076,54,22,"CANCEL"],[1,1083,55,8,"this"],[1,1088,55,13,"isPressed"],[1,1099,55,25],[1,1101,56,8,"this"],[1,1106,56,13,"onPointerCancel"],[1,1122,56,29,"adaptedEvent"],[1,1125,59,2],[1,1126,60,2,"registerListeners"],[1,1146,61,4,"this"],[1,1151,61,9,"view"],[1,1156,61,14,"addEventListener"],[1,1173,61,31],[1,1183,61,42,"this"],[1,1188,61,47,"keyDownCallback"],[1,1205,62,4,"KeyboardEventManager"],[1,1207,62,25,"instances"],[1,1217,62,35,"add"],[1,1221,62,39,"this"],[1,1227,63,9,"KeyboardEventManager"],[1,1229,63,30,"registeredStaticListeners"],[1,1257,64,6,"KeyboardEventManager"],[1,1259,64,27,"registeredStaticListeners"],[1,1286,64,55],[1,1288,65,6,"document"],[1,1297,65,15,"addEventListener"],[1,1314,65,32],[1,1322,65,41,"KeyboardEventManager"],[1,1324,65,62,"keyUpStaticCallback"],[1,1344,65,83],[1,1345,66,8,"capture"],[1,1354,66,17],[1,1358,69,2],[1,1359,70,2,"unregisterListeners"],[1,1381,71,4,"this"],[1,1386,71,9,"view"],[1,1391,71,14,"removeEventListener"],[1,1411,71,34],[1,1421,71,45,"this"],[1,1426,71,50,"keyDownCallback"],[1,1443,72,4,"KeyboardEventManager"],[1,1445,72,25,"instances"],[1,1455,72,35,"delete"],[1,1462,72,42,"this"],[1,1468,73,48],[1,1472,73,8,"KeyboardEventManager"],[1,1474,73,29,"instances"],[1,1484,73,39,"size"],[1,1491,74,6,"document"],[1,1500,74,15,"removeEventListener"],[1,1520,74,35],[1,1528,74,44,"KeyboardEventManager"],[1,1530,74,65,"keyUpStaticCallback"],[1,1550,74,86],[1,1551,75,8,"capture"],[1,1560,75,17],[1,1564,77,6,"KeyboardEventManager"],[1,1566,77,27,"registeredStaticListeners"],[1,1593,77,55],[1,1595,79,2],[1,1596,80,2,"mapEvent"],[1,1605,80,11,"event"],[1,1607,80,18,"eventType"],[1,1610,81,4],[1,1616,81,10,"viewRect"],[1,1618,81,21,"event"],[1,1620,81,27,"target"],[1,1627,81,34,"getBoundingClientRect"],[1,1651,82,10,"viewportPosition"],[1,1653,82,29],[1,1654,83,6,"x"],[1,1656,83,9,"viewRect"],[1,1659,83,19,"x"],[1,1661,83,23,"viewRect"],[1,1664,83,33,"width"],[1,1670,83,41],[1,1672,84,6,"y"],[1,1674,84,9,"viewRect"],[1,1677,84,19,"y"],[1,1679,84,23,"viewRect"],[1,1682,84,33,"height"],[1,1689,84,42],[1,1692,86,10,"relativePosition"],[1,1694,86,29],[1,1695,87,6,"x"],[1,1697,87,9,"viewRect"],[1,1700,87,19,"width"],[1,1706,87,27],[1,1708,88,6,"y"],[1,1710,88,9,"viewRect"],[1,1713,88,19,"height"],[1,1720,88,28],[1,1723,90,4],[1,1729,90,11],[1,1730,91,6,"x"],[1,1732,91,9,"viewportPosition"],[1,1734,91,26,"x"],[1,1736,92,6,"y"],[1,1738,92,9,"viewportPosition"],[1,1740,92,26,"y"],[1,1742,93,6,"offsetX"],[1,1750,93,15,"relativePosition"],[1,1752,93,32,"x"],[1,1754,94,6,"offsetY"],[1,1762,94,15,"relativePosition"],[1,1764,94,32,"y"],[1,1766,95,6,"pointerId"],[1,1776,95,17],[1,1778,96,6,"eventType"],[1,1788,96,17,"eventType"],[1,1790,97,6,"pointerType"],[1,1802,97,19,"PointerType"],[1,1804,97,30,"PointerType"],[1,1816,97,31,"KEY"],[1,1820,98,6,"time"],[1,1825,98,12,"event"],[1,1827,98,18,"timeStamp"],[1,1837,100,2],[1,1839,101,1],[1,1842]],"functionMap":{"names":["<global>","KeyboardEventManager","keyUpStaticCallback","instances.forEach$argument_0","keyDownCallback","onKeyUp","dispatchEvent","registerListeners","unregisterListeners","mapEvent"],"mappings":"AAA;eCK;+BCM;2BCQ;KDE;GDC;oBGC;GHS;YIC;GJK;EKC;GLmB;EMC;GNS;EOC;GPS;EQC;GRoB;CDC"},"hasCjsExports":false},"type":"js/module"}]}