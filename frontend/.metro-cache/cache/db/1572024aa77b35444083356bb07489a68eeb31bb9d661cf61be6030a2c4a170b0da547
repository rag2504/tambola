{"dependencies":[{"name":"./CircularBuffer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":46,"index":61}}],"key":"uVgm5B14gvsefJ8WOcz2JJQif+Q=","exportNames":["*"],"imports":1}},{"name":"./LeastSquareSolver","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":62},"end":{"line":4,"column":52,"index":114}}],"key":"pL+OKV6zXpveMrqrg91kFAGJP/w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return l}});var t=e(r(d[0])),s=e(r(d[1]));class l{assumePointerMoveStoppedMilliseconds=40;historySize=20;horizonMilliseconds=300;minSampleSize=3;constructor(){this.samples=new t.default(this.historySize)}add(e){this.samples.push(e)}getVelocityEstimate(){const e=[],t=[],l=[],n=[];let o=0,u=this.samples.size-1;const c=this.samples.get(u);if(!c)return null;let h=c;for(;o<this.samples.size;){const s=this.samples.get(u),f=c.time-s.time,p=Math.abs(s.time-h.time);if(h=s,f>this.horizonMilliseconds||p>this.assumePointerMoveStoppedMilliseconds)break;e.push(s.x),t.push(s.y),l.push(1),n.push(-f),o++,u--}if(o>=this.minSampleSize){const o=new s.default(n,e,l).solve(2);if(null!==o){const e=new s.default(n,t,l).solve(2);if(null!==e){return[1e3*o.coefficients[1],1e3*e.coefficients[1]]}}}return null}get velocity(){const e=this.getVelocityEstimate();return null!==e?e:[0,0]}reset(){this.samples.clear()}}});","lineCount":1,"map":[[1,29,1,0],[1,42,1,13],[1,51,1,13,"_interopDefault"],[1,53,1,13,"e"],[1,56,1,13],[1,63,1,13,"e"],[1,68,1,13,"__esModule"],[1,79,1,13,"e"],[1,81,1,13],[1,82,1,13,"default"],[1,90,1,13,"e"],[1,92,1,13],[1,93,1,13,"Object"],[1,100,1,13,"defineProperty"],[1,115,1,13,"_e"],[1,118,1,13],[1,132,1,13,"value"],[1,139,1,13],[1,143,5,15,"Object"],[1,150,5,15,"defineProperty"],[1,165,5,15,"_e"],[1,168,5,15],[1,179,5,15,"enumerable"],[1,191,5,15],[1,193,5,15,"get"],[1,197,5,15],[1,215,5,15,"VelocityTracker"],[1,216,5,15],[1,220,3,0],[1,224,3,0,"CircularBuffer"],[1,226,3,0,"_interopDefault"],[1,228,3,0,"r"],[1,230,3,0,"d"],[1,232,3,0],[1,237,4,0,"LeastSquareSolver"],[1,239,4,0,"_interopDefault"],[1,241,4,0,"r"],[1,243,4,0,"d"],[1,245,4,0],[1,250,5,15],[1,256,5,21,"VelocityTracker"],[1,258,6,2,"assumePointerMoveStoppedMilliseconds"],[1,295,6,41],[1,298,7,2,"historySize"],[1,310,7,16],[1,313,8,2,"horizonMilliseconds"],[1,333,8,24],[1,337,9,2,"minSampleSize"],[1,351,9,18],[1,353,10,2,"constructor"],[1,367,11,4,"this"],[1,372,11,9,"samples"],[1,380,11,19],[1,384,11,23,"CircularBuffer"],[1,386,11,37,"default"],[1,394,11,38,"this"],[1,399,11,43,"historySize"],[1,411,12,2],[1,412,13,2,"add"],[1,416,13,6,"event"],[1,419,14,4,"this"],[1,424,14,9,"samples"],[1,432,14,17,"push"],[1,437,14,22,"event"],[1,439,15,2],[1,440,23,2,"getVelocityEstimate"],[1,462,24,4],[1,468,24,10,"x"],[1,470,24,14],[1,473,25,10,"y"],[1,475,25,14],[1,478,26,10,"w"],[1,480,26,14],[1,483,27,10,"time"],[1,485,27,17],[1,488,28,4],[1,492,28,8,"sampleCount"],[1,494,28,22],[1,496,29,8,"index"],[1,498,29,16,"this"],[1,503,29,21,"samples"],[1,511,29,29,"size"],[1,516,29,36],[1,518,30,4],[1,524,30,10,"newestSample"],[1,526,30,25,"this"],[1,531,30,30,"samples"],[1,539,30,38,"get"],[1,543,30,42,"index"],[1,546,31,4],[1,550,31,9,"newestSample"],[1,552,32,6],[1,559,32,13],[1,564,34,4],[1,568,34,8,"previousSample"],[1,570,34,25,"newestSample"],[1,572,38,4],[1,577,38,11,"sampleCount"],[1,579,38,25,"this"],[1,584,38,30,"samples"],[1,592,38,38,"size"],[1,598,38,44],[1,599,39,6],[1,605,39,12,"sample"],[1,607,39,21,"this"],[1,612,39,26,"samples"],[1,620,39,34,"get"],[1,624,39,38,"index"],[1,627,40,12,"age"],[1,629,40,18,"newestSample"],[1,631,40,31,"time"],[1,636,40,38,"sample"],[1,638,40,45,"time"],[1,643,41,12,"delta"],[1,645,41,20,"Math"],[1,650,41,25,"abs"],[1,654,41,29,"sample"],[1,656,41,36,"time"],[1,661,41,43,"previousSample"],[1,663,41,58,"time"],[1,669,43,6],[1,672,42,6,"previousSample"],[1,674,42,23,"sample"],[1,676,43,10,"age"],[1,678,43,16,"this"],[1,683,43,21,"horizonMilliseconds"],[1,704,43,44,"delta"],[1,706,43,52,"this"],[1,711,43,57,"assumePointerMoveStoppedMilliseconds"],[1,748,44,8],[1,754,46,6,"x"],[1,756,46,8,"push"],[1,761,46,13,"sample"],[1,763,46,20,"x"],[1,766,47,6,"y"],[1,768,47,8,"push"],[1,773,47,13,"sample"],[1,775,47,20,"y"],[1,778,48,6,"w"],[1,780,48,8,"push"],[1,785,48,13],[1,788,49,6,"time"],[1,790,49,11,"push"],[1,796,49,17,"age"],[1,799,50,6,"sampleCount"],[1,803,51,6,"index"],[1,806,52,4],[1,807,53,4],[1,810,53,8,"sampleCount"],[1,813,53,23,"this"],[1,818,53,28,"minSampleSize"],[1,832,53,43],[1,833,54,6],[1,839,55,12,"xFit"],[1,841,54,22],[1,845,54,26,"LeastSquareSolver"],[1,847,54,43,"default"],[1,855,54,44,"time"],[1,857,54,50,"x"],[1,859,54,53,"w"],[1,862,55,27,"solve"],[1,868,55,33],[1,871,56,6],[1,874,56,19],[1,881,56,10,"xFit"],[1,883,56,25],[1,884,57,8],[1,890,58,14,"yFit"],[1,892,57,24],[1,896,57,28,"LeastSquareSolver"],[1,898,57,45,"default"],[1,906,57,46,"time"],[1,908,57,52,"y"],[1,910,57,55,"w"],[1,913,58,29,"solve"],[1,919,58,35],[1,922,59,8],[1,925,59,21],[1,932,59,12,"yFit"],[1,934,59,27],[1,935,62,10],[1,941,62,17],[1,942,60,51],[1,946,60,28,"xFit"],[1,948,60,33,"coefficients"],[1,961,60,46],[1,964,61,51],[1,968,61,28,"yFit"],[1,970,61,33,"coefficients"],[1,983,61,46],[1,986,63,8],[1,987,64,6],[1,988,65,4],[1,989,66,4],[1,996,66,11],[1,1000,67,2],[1,1001,68,2],[1,1013,68,6,"velocity"],[1,1016,69,4],[1,1022,69,10,"estimate"],[1,1024,69,21,"this"],[1,1029,69,26,"getVelocityEstimate"],[1,1051,70,4],[1,1058,70,21],[1,1065,70,8,"estimate"],[1,1067,71,13,"estimate"],[1,1069,73,11],[1,1070,73,12],[1,1072,73,15],[1,1074,74,2],[1,1075,75,2,"reset"],[1,1083,76,4,"this"],[1,1088,76,9,"samples"],[1,1096,76,17,"clear"],[1,1103,77,2],[1,1105,78,1],[1,1108]],"functionMap":{"names":["<global>","VelocityTracker","constructor","add","getVelocityEstimate","get__velocity","reset"],"mappings":"AAA;eCI;ECK;GDE;EEC;GFE;EGQ;GH4C;EIC;GJM;EKC;GLE;CDC"},"hasCjsExports":false},"type":"js/module"}]}